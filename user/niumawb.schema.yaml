# Rime schema settings
# encoding: utf-8

schema:
  schema_id: niumawb
  name: "ç‰›ç¢¼äº”ç­†"
  version: "2.0"
  author:
    - æ–¹æ¡ˆ é™ˆè‡ªé¸£
  description: |
    ä¸‰ç å®šå­— å–ç ç›´è§‚ é‡ç ç‡ä½ å¤§å­—ç¬¦é›†
  dependencies:
    - newma_spelling
    - terra_pinyin
    - stroke
  icon: niuma.ico
  ascii_icon: en.ico
  full_icon: full.ico
  half_icon: half.ico

switches:
  - name: traditionalization
    reset: 1
    states: [ ç®€, ç¹ ]
  - options:
    - niuma_chaifen.off
    - niuma_chaifen.lv1
    - niuma_chaifen.lv2
    - niuma_chaifen.lv3
    states: [ ã€‡æ³¨è§£, ä¸€é‡æ³¨è§£, äºŒé‡æ³¨è§£, ä¸‰é‡æ³¨è§£ ]
    reset: 0
  - name: uninfo
    reset: 0
    states: [ ã€‡, JU ] 
  - name: pinyin
    reset: 0
    states: [ å½¢, éŸ³ ]
  - name: emoji
    reset: 0
    states: [ ğŸˆšï¸, ğŸˆ¶ï¸ ]
  - name: ascii_mode
    reset: 0
    states: [ ä¸­, En ]
  - name: full_shape
    states: [ åŠ, å…¨ ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]

engine:
  processors:
    - lua_processor@*select_character  #ä»¥è¯å®šå­—ï¼ˆ[\]ï¼‰
    - lua_processor@*niuma.niuma_chaifen_processor
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@reverse_lookup
    - affix_segmentor@terra_pinyin_lookup
    - affix_segmentor@stroke_lookup
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator
    - script_translator@terra_pinyin
    - script_translator@terra_pinyin_lookup
    - table_translator@stroke_lookup
    - lua_translator@*number_translator # æ•°å­—è½¬å¤§å†™
    - lua_translator@*shijian
    - lua_translator@*unicode #Unicodeè½‰å­—ç¬¦
    - lua_translator@*start 
    - lua_translator@*emoji
  filters:
    - lua_filter@*unicode_info #lua unicodeæ˜¾ç¤ºæ»¤é•œ
    - lua_filter@*niuma.niuma_chaifen_filter
    - lua_filter@*multiline*Multiline_filter
    - simplifier 
    - simplifier@emoji
    - simplifier@pinyin
    - uniquifier

schema_name:
  code: niumawb
  spelling: newma_spelling

niuma_chaifen:
  lua:
    switch_key: "Control+c"
    cycle_key: "Shift+Control+C"

speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz'"                  #å®šä¹‰æœ¬æ–¹æ¡ˆè¾“å…¥é”®
  delimiter: "`"
  max_code_length: 4
  auto_select: true
  auto_clear: max_length  #è‡ªåŠ¨æ¸…ç å‚æ•°ï¼šmanualç©ºç æŒ‰ä¸‹ä¸€é”®ç¡®è®¤æ¸…å±ã€autoç©ºç è‡ªåŠ¨æ¸…ã€max_lengthè¾¾æœ€é•¿ç æ—¶åç é¡¶ä¸Šæ¸…å±

translator:
  dictionary: niumawb
  initial_quality: 10000
  enable_charset_filter: false
  enable_sentence: false
  enable_encoder: false
  encode_commit_history: false
  max_phrase_length: 2
  enable_completion: true
  enable_user_dict: false
  db_class: tabledb
  disable_user_dict_for_patterns:
    - "^z.*$"
  preedit_format:
    - xform/[^ \+]+ //
  comment_format:
    - xform/~//

abc_segmentor:
  extra_tags:
    - reverse_lookup

terra_pinyin:
  tag: terra_pinyin
  dictionary: terra_pinyin
  initial_quality: 0.2

reverse_lookup:
  tag: reverse_lookup
  prefix: "`"
  tips: ã€åæŸ¥ï¼šæ‹¼éŸ³+ç¬”ç”»ã€‘
  closing_tips: ã€åæŸ¥å…³é—­ã€‘
  extra_tags:
    - terra_pinyin_lookup
    - stroke_lookup

terra_pinyin_lookup:
  tag: terra_pinyin_lookup
  dictionary: terra_pinyin
  prefix: "`"
  tips: ã€æ‹¼éŸ³åæŸ¥ã€‘
  closing_tips: ã€åæŸ¥å…³é—­ã€‘
  initial_quality: 0.2
  preedit_format:
    __include: terra_pinyin.schema:/translator/preedit_format
  comment_format:
    __include: terra_pinyin.schema:/translator/comment_format

stroke_lookup:
  tag: stroke_lookup
  dictionary: stroke
  prefix: "`/"
  tips: ã€äº”ç¬”ç”»åæŸ¥ã€‘
  closing_tips: ã€åæŸ¥å…³é—­ã€‘
  initial_quality: 0.5
  preedit_format:
    - 'xform/^([hspnz]+)$/$1\tï¼ˆ\U$1\Eï¼‰/'
    - xlit/HSPNZ/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/

terra_pinyin_reverse_lookup:
  tags: [ terra_pinyin, terra_pinyin_lookup ]
  dictionary: niumawb
  preedit_format:
    __include: terra_pinyin.schema:/translator/preedit_format
  comment_format:
#    __include: terra_pinyin.schema:/translator/comment_format

stroke_reverse_lookup:
  __include: terra_pinyin_reverse_lookup
  tags: [ stroke_lookup ]

simplifier:
  option_name: traditionalization
  opencc_config: s2t.json
  show_in_comment: true
  tags: 
    - abc
  tips: all

emoji:
  opencc_config: emoji.json
  option_name: emoji
  tips: all

pinyin:
  opencc_config: pinyin.json
  option_name: pinyin
  show_in_comment: true
  comment_format:
    - 'xform/&nbsp;/ /'
  tips: all
  tags:
    - abc
    - niumawb  
  
punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - { when: has_menu, accept: "Control+Shift+E", toggle: emoji }
    - { when: has_menu, accept: "Control+Shift+P", toggle: pinyin }
    - { when: has_menu, accept: "Control+Shift+U", toggle: uninfo }

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "`([a-z]+)*$"
    terra_pinyin_lookup: "`[a-z|a-z;<,>/\\\\]*'?$"
    stroke_lookup: "`/([hspnz]+)*$"
    punct: "^/([0-9]0?|[A-Za-z]+)$"
    unicode: "^U[0-9a-f]+"
    number_translator: "^S[0-9]+[.]?[0-9]*"

style:
  color_scheme: wakin
